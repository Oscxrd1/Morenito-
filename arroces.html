<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Arma tu arroz de leche</title>
    <link rel="stylesheet" href="style.css">
    <script async src="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.js"></script>
    <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.css" />
</head>
<body>
    <h2>Arma tu arroz de leche</h2>
    <form id="custom-arroz">
        <label>Nombre completo: <input type="text" id="nombre" required></label><br>
        <label>Celular: <input type="tel" id="celular" required></label><br><br>

        <label>Sabor:
            <select id="sabor">
                <option value="Tradicional">Tradicional</option>
                <option value="Arequipe">Arequipe</option>
                <option value="Coco">Coco</option>
            </select>
        </label><br>

        <label>Toppings (elige hasta 2):<br>
            <input type="checkbox" name="toppings" value="Queso"> Queso
            <input type="checkbox" name="toppings" value="Coco"> Coco
            <input type="checkbox" name="toppings" value="Canela"> Canela molida
            <input type="checkbox" name="toppings" value="Chispas"> Chispas de chocolate
            <input type="checkbox" name="toppings" value="Oreo"> Galleta Oreo
            <input type="checkbox" name="toppings" value="Pasas"> Uvas pasas
        </label><br>

        <label>Salsa:
            <select id="salsa">
                <option value="Arequipe">Arequipe</option>
                <option value="Lechera">Lechera</option>
                <option value="Chocolate">Chocolate</option>
                <option value="Nutella">Nutella</option>
                <option value="Fresa">Fresa</option>
                <option value="Mora">Mora</option>
            </select>
        </label><br>

        <label>Tamaño:
            <select id="tamano">
                <option value="8oz" data-price="5900">8 Oz - $5.900</option>
                <option value="12oz" data-price="9900">12 Oz - $9.900</option>
            </select>
        </label><br><br>

        <button 
            class="snipcart-add-item"
            type="button"
            data-item-id="arroz-leche"
            data-item-name="Arroz de Leche Personalizado"
            data-item-url="/arroces.html"
            data-item-price="5900"
            data-item-description=""
            data-item-custom1-name="Nombre"
            data-item-custom1-required="true"
            data-item-custom2-name="Celular"
            data-item-custom2-required="true"
            data-item-custom3-name="Sabor"
            data-item-custom4-name="Toppings"
            data-item-custom5-name="Salsa"
            data-item-custom6-name="Tamaño"
        >Añadir al carrito</button>
    </form>

    <div hidden id="snipcart" data-api-key="YOUR_SNIPCART_PUBLIC_API_KEY" data-config-modal-style="side"></div>
</body>
<script>
    const boton = document.querySelector(".snipcart-add-item");
    boton.addEventListener("click", () => {
        const nombre = document.getElementById("nombre").value;
        const celular = document.getElementById("celular").value;
        const sabor = document.getElementById("sabor").value;
        const salsa = document.getElementById("salsa").value;
        const tamanoEl = document.getElementById("tamano");
        const tamano = tamanoEl.value;
        const precio = tamanoEl.options[tamanoEl.selectedIndex].dataset.price;

        const toppings = [...document.querySelectorAll("input[name='toppings']:checked")]
            .map(cb => cb.value).slice(0, 2).join(", ");

        boton.dataset.itemPrice = precio;
        boton.dataset.itemCustom1Value = nombre;
        boton.dataset.itemCustom2Value = celular;
        boton.dataset.itemCustom3Value = sabor;
        boton.dataset.itemCustom4Value = toppings;
        boton.dataset.itemCustom5Value = salsa;
        boton.dataset.itemCustom6Value = tamano;
    });
</script>
</html>
